class WaterDroplets{constructor(t="water-canvas"){this.canvas=document.getElementById(t),this.canvas&&(this.ctx=this.canvas.getContext("2d"),this.droplets=[],this.ripples=[],this.lastScrollY=0,this.isScrolling=!1,this.colors=["rgba(93, 173, 226, 0.7)","rgba(133, 193, 233, 0.6)","rgba(174, 214, 241, 0.5)","rgba(107, 179, 120, 0.5)"],this.init())}init(){this.resize(),window.addEventListener("resize",()=>this.resize()),window.addEventListener("scroll",()=>this.onScroll(),{passive:!0}),this.animate()}resize(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight}onScroll(){const t=Math.abs(window.scrollY-this.lastScrollY);if(this.lastScrollY=window.scrollY,t>5){const e=Math.min(Math.floor(t/10),5);for(let t=0;t<e;t++)Math.random()<.3&&this.spawnDroplet()}}spawnDroplet(){if(this.droplets.length>=50)return;const t=3+9*Math.random();this.droplets.push({x:Math.random()*this.canvas.width,y:-20,size:t,vx:2*(Math.random()-.5),vy:2*Math.random()+1,opacity:.6+.4*Math.random(),color:this.colors[Math.floor(Math.random()*this.colors.length)],wobble:Math.random()*Math.PI*2})}spawnRipple(t,e){this.ripples.push({x:t,y:e,radius:5,maxRadius:30+30*Math.random(),opacity:.5})}update(){for(let t=this.droplets.length-1;t>=0;t--){const e=this.droplets[t];e.vy+=.15,e.wobble+=.06,e.vx+=.1*Math.sin(e.wobble),e.vx*=.99,e.x+=e.vx,e.y+=e.vy,e.y>this.canvas.height+20?(e.y<=this.canvas.height+50&&this.spawnRipple(e.x,this.canvas.height-10),this.droplets.splice(t,1)):(e.x<-50||e.x>this.canvas.width+50)&&this.droplets.splice(t,1)}for(let t=this.ripples.length-1;t>=0;t--){const e=this.ripples[t];e.radius+=2,e.opacity-=.015,(e.opacity<=0||e.radius>=e.maxRadius)&&this.ripples.splice(t,1)}}drawDroplet(t){this.ctx.save(),this.ctx.globalAlpha=t.opacity,this.ctx.beginPath(),this.ctx.moveTo(t.x,t.y-1.5*t.size),this.ctx.bezierCurveTo(t.x+t.size,t.y-.5*t.size,t.x+t.size,t.y+.5*t.size,t.x,t.y+t.size),this.ctx.bezierCurveTo(t.x-t.size,t.y+.5*t.size,t.x-t.size,t.y-.5*t.size,t.x,t.y-1.5*t.size);const e=this.ctx.createRadialGradient(t.x-.3*t.size,t.y-.3*t.size,0,t.x,t.y,1.5*t.size);e.addColorStop(0,"rgba(255,255,255,0.8)"),e.addColorStop(.3,t.color),e.addColorStop(1,"rgba(93,173,226,0.2)"),this.ctx.fillStyle=e,this.ctx.fill(),this.ctx.beginPath(),this.ctx.arc(t.x-.3*t.size,t.y-.3*t.size,.25*t.size,0,2*Math.PI),this.ctx.fillStyle="rgba(255,255,255,0.6)",this.ctx.fill(),this.ctx.restore()}drawRipple(t){this.ctx.save(),this.ctx.globalAlpha=t.opacity,this.ctx.strokeStyle="rgba(93,173,226,0.3)",this.ctx.lineWidth=2,this.ctx.beginPath(),this.ctx.arc(t.x,t.y,t.radius,0,2*Math.PI),this.ctx.stroke(),t.radius>10&&(this.ctx.globalAlpha=.5*t.opacity,this.ctx.beginPath(),this.ctx.arc(t.x,t.y,.6*t.radius,0,2*Math.PI),this.ctx.stroke()),this.ctx.restore()}render(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ripples.forEach(t=>this.drawRipple(t)),this.droplets.forEach(t=>this.drawDroplet(t))}animate(){this.update(),this.render(),requestAnimationFrame(()=>this.animate())}}document.addEventListener("DOMContentLoaded",()=>new WaterDroplets);class Lightbox{constructor(){this.images=[],this.elements=[],this.currentIndex=0,this.lightbox=null,this.init()}init(){this.collectImages(),this.createLightbox(),this.bindEvents()}isExcluded(t){if(t.closest(".header, .logo, .nav"))return!0;const e=Math.min(t.naturalWidth||t.width,t.naturalHeight||t.height);return e>0&&e<100||!(!t.src?.includes(".svg")&&!t.hasAttribute("data-no-lightbox"))}getCaption(t){const e=t.closest(".gallery-item, .attraction-card, .featured-attraction, .activity-card, .image-break");if(!e)return{title:t.alt||"",desc:""};const i=e.querySelector("h3, h4"),s=e.querySelector("p, blockquote");return{title:i?.textContent||t.alt||"",desc:s?.textContent||""}}collectImages(){document.querySelectorAll("img").forEach(t=>{if(this.isExcluded(t))return;const e=this.getCaption(t);this.images.push({src:t.src,alt:t.alt,...e}),this.elements.push(t)})}createLightbox(){this.lightbox=document.createElement("div"),this.lightbox.className="lightbox",this.lightbox.innerHTML='\n      <button class="lightbox-close" aria-label="Fechar"></button>\n      <span class="lightbox-counter">1/1</span>\n      <button class="lightbox-nav prev" aria-label="Anterior">‚Äπ</button>\n      <button class="lightbox-nav next" aria-label="Pr√≥xima">‚Ä∫</button>\n      <div class="lightbox-caption"><h3></h3><p></p></div>\n      <div class="lightbox-content">\n        <img src="" alt="" class="lightbox-img">\n        <div class="lightbox-loading" aria-hidden="true" role="status">\n          <div class="lightbox-spinner" aria-hidden="true"></div>\n          <img src="images/logo-apa-do-encantado.svg" alt="Logo APA do Encantado" class="lightbox-loading-logo" aria-hidden="true">\n        </div>\n      </div>\n    ',document.body.appendChild(this.lightbox)}bindEvents(){this.elements.forEach((t,e)=>{const i=t.closest(".gallery-item, .water-reveal-image, .attraction-image, .activity-image, .featured-image, .about-image, .image-break-wrapper")||t;i.style.cursor="zoom-in",i.addEventListener("click",t=>{t.target.closest('a:not([href^="#"])')||(t.preventDefault(),this.open(e))})}),this.lightbox.querySelector(".lightbox-close").onclick=()=>this.close(),this.lightbox.querySelector(".prev").onclick=t=>{t.stopPropagation(),this.navigate(-1)},this.lightbox.querySelector(".next").onclick=t=>{t.stopPropagation(),this.navigate(1)},this.lightbox.onclick=t=>{t.target===this.lightbox&&this.close()},document.addEventListener("keydown",t=>{this.lightbox.classList.contains("active")&&("Escape"===t.key&&this.close(),"ArrowLeft"===t.key&&this.navigate(-1),"ArrowRight"===t.key&&this.navigate(1))}),this.setupTouchNavigation()}setupTouchNavigation(){const t=this.lightbox.querySelector(".lightbox-content");let e=0,i=0,s=!1,n=0,a=!1;t.addEventListener("touchstart",t=>{n=t.touches.length,s=n>=2,a=!1,1===n&&(e=t.touches[0].clientX,i=t.touches[0].clientY)},{passive:!0}),t.addEventListener("touchmove",t=>{t.touches.length>=2&&(s=!0),a=!0},{passive:!0}),t.addEventListener("touchend",t=>{if(s)return s=!1,void(n=0);if(1!==n)return void(n=0);const a=t.changedTouches[0].clientX,o=t.changedTouches[0].clientY,r=e-a,l=i-o;Math.abs(r)>60&&Math.abs(r)>1.5*Math.abs(l)&&this.navigate(r>0?1:-1),n=0},{passive:!0}),t.addEventListener("click",e=>{if(!("ontouchstart"in window||navigator.maxTouchPoints>0))return;if(a)return;const i=t.getBoundingClientRect(),s=e.clientX-i.left;return s<=60?(e.stopPropagation(),void this.navigate(-1)):s>=i.width-60?(e.stopPropagation(),void this.navigate(1)):void 0})}open(t){this.currentIndex=t,this.show(),this.lightbox.classList.add("active"),document.body.style.overflow="hidden"}close(){this.lightbox.classList.remove("active"),document.body.style.overflow=""}navigate(t){this.currentIndex=(this.currentIndex+t+this.images.length)%this.images.length,this.show()}show(){const t=this.images[this.currentIndex],e=this.lightbox.querySelector(".lightbox-img"),i=this.lightbox.querySelector(".lightbox-caption"),s=this.lightbox.querySelector(".lightbox-counter"),n=this.lightbox.querySelector(".lightbox-loading");s.textContent=`${this.currentIndex+1}/${this.images.length}`,i.style.display="none",n.style.display="flex",e.classList.add("hidden"),this.currentLoader&&(this.currentLoader.onload=null,this.currentLoader.onerror=null,this.currentLoader=null);const a=this._loadId=(this._loadId||0)+1,o=new Image;this.currentLoader=o,o.onload=()=>{a===this._loadId&&(e.src=t.src,e.alt=t.alt||"",i.querySelector("h3").textContent=t.title||"",i.querySelector("p").textContent=t.desc||"",i.style.display=t.title||t.desc?"block":"none",n.style.display="none",e.classList.remove("hidden"),this.currentLoader=null)},o.onerror=()=>{a===this._loadId&&(n.style.display="none",i.querySelector("h3").textContent="Erro ao carregar a imagem",i.querySelector("p").textContent="",i.style.display="block",e.classList.remove("hidden"),e.src="",this.currentLoader=null)},o.src=t.src}}function initNavigation(){const t=document.querySelector(".header"),e=document.querySelector(".mobile-menu-btn"),i=document.querySelector(".nav-links");let s=!1;window.addEventListener("scroll",()=>{s||(s=!0,requestAnimationFrame(()=>{t.classList.toggle("scrolled",window.scrollY>100),s=!1}))},{passive:!0}),e&&i&&(e.addEventListener("click",()=>{const t=i.classList.toggle("active");e.classList.toggle("active"),document.body.style.overflow=t?"hidden":""}),i.querySelectorAll("a").forEach(t=>{t.addEventListener("click",()=>{i.classList.remove("active"),e.classList.remove("active"),document.body.style.overflow=""})}))}function initScrollAnimations(){const t=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(t.target.classList.add("revealed"),t.target.parentElement?.classList.add("revealed"))})},{rootMargin:"0px 0px -50px 0px",threshold:.1});document.querySelectorAll([".organic-box",".stat-card",".attraction-card",".activity-card",".fauna-card",".fauna-card-image",".section-header",".fade-in",".slide-up",".slide-left",".slide-right",".scale-in",".water-reveal-image",".gallery-item",".featured-attraction",".featured-image",".featured-content",".attractions-grid",".activities-grid",".fauna-grid",".fauna-grid-images",".about-stats",".gallery-grid"].join(", ")).forEach(e=>t.observe(e))}function initVideoHandler(){const t=document.getElementById("hero-video");t&&(navigator.connection?.effectiveType?.includes("2g")?t.style.display="none":(t.addEventListener("loadeddata",()=>t.classList.add("loaded")),new IntersectionObserver(e=>{e[0].isIntersecting?t.play().catch(()=>{}):t.pause()},{threshold:.25}).observe(t)))}function initFaunaVideoHandler(){document.querySelectorAll(".fauna-video video").forEach(t=>{t.addEventListener("click",async e=>{e.preventDefault();try{t.requestFullscreen?await t.requestFullscreen():t.webkitRequestFullscreen?await t.webkitRequestFullscreen():t.webkitEnterFullscreen&&t.webkitEnterFullscreen(),t.muted=!1,t.play()}catch(e){t.muted=!1,t.play()}}),document.addEventListener("fullscreenchange",()=>{document.fullscreenElement||(t.muted=!0)}),document.addEventListener("webkitfullscreenchange",()=>{document.webkitFullscreenElement||(t.muted=!0)}),new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting?t.play().catch(()=>{}):t.pause()})},{threshold:.25}).observe(t)})}function initRippleEffect(){document.querySelectorAll(".btn").forEach(t=>{t.addEventListener("click",function(t){const e=this.getBoundingClientRect(),i=document.createElement("span");i.className="ripple",i.style.left=t.clientX-e.left+"px",i.style.top=t.clientY-e.top+"px",this.appendChild(i),setTimeout(()=>i.remove(),600)})})}function initSmoothScroll(){document.querySelectorAll('a[href^="#"]').forEach(t=>{t.addEventListener("click",function(t){const e=this.getAttribute("href");if("#"===e)return;const i=document.querySelector(e);if(!i)return;t.preventDefault();const s=document.querySelector(".header")?.offsetHeight||0;window.scrollTo({top:i.offsetTop-s,behavior:"smooth"})})})}function initCounterAnimation(){const t=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&!t.target.dataset.animated&&(t.target.dataset.animated="true",animateNumber(t.target))})},{threshold:.5});document.querySelectorAll(".stat-number").forEach(e=>t.observe(e))}function animateNumber(t){const e=t.textContent,i=e.match(/[\d.,]+/);if(!i)return;const s=i[0].replace(/\./g,"").replace(",","."),n=parseFloat(s),a=e.replace(i[0],""),o=performance.now();requestAnimationFrame(function i(s){const r=Math.min((s-o)/2e3,1),l=1-Math.pow(1-r,3);t.textContent=Math.floor(n*l).toLocaleString("pt-BR")+a,r<1?requestAnimationFrame(i):t.textContent=e})}function initWaterDrop(){document.querySelectorAll("[data-water-drop]").forEach(t=>{t.addEventListener("mouseenter",()=>t.classList.add("dripping")),t.addEventListener("animationend",()=>t.classList.remove("dripping"))})}document.addEventListener("DOMContentLoaded",()=>new Lightbox),document.addEventListener("DOMContentLoaded",()=>{initNavigation(),initScrollAnimations(),initVideoHandler(),initFaunaVideoHandler(),initRippleEffect(),initSmoothScroll(),initCounterAnimation(),initWaterDrop()}),console.log("%cüåø APA do Encantado","color:#4a9960;font-size:24px;font-weight:bold"),console.log("%c√Årea de Prote√ß√£o Ambiental ‚Ä¢ Goi√°s, Brasil","color:#666;font-size:14px");